{% extends "base.html" %}

{% block title %}T√≠nh GPA - UTH{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12 text-center mb-4">
        <h1 class="display-4">GPA Manager Pro</h1>
        <p class="lead">H·ªá th·ªëng t√≠nh ƒëi·ªÉm GPA cho sinh vi√™n UTH</p>
    </div>
</div>

<div class="row">
    <div class="col-md-8 offset-md-2">
        <div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="semesterTabs" role="tablist">
                    {% for i in range(1, 10) %}
                    <li class="nav-item">
                        <a class="nav-link {% if i == 1 %}active{% endif %}" 
                           id="semester-{{ i }}-tab" 
                           data-bs-toggle="tab" 
                           href="#semester-{{ i }}" 
                           role="tab">
                            K·ª≥ {{ i }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="semesterTabContent">
                    {% for i in range(1, 10) %}
                    <div class="tab-pane fade {% if i == 1 %}show active{% endif %}" 
                         id="semester-{{ i }}" 
                         role="tabpanel">
                        <!-- Form nh·∫≠p ƒëi·ªÉm cho t·ª´ng k·ª≥ -->
                        <form class="semester-form" data-semester="{{ i }}">
                            <div class="mb-3">
                                <label for="subject-{{ i }}" class="form-label">M√¥n h·ªçc</label>
                                <select class="form-select subject-select" id="subject-{{ i }}" required>
                                    <option value="">Ch·ªçn m√¥n h·ªçc...</option>
                                </select>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="credits-{{ i }}" class="form-label">S·ªë t√≠n ch·ªâ</label>
                                        <input type="number" class="form-control" id="credits-{{ i }}" 
                                               min="1" max="10" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="grade-{{ i }}" class="form-label">ƒêi·ªÉm (thang 10)</label>
                                        <input type="number" class="form-control" id="grade-{{ i }}" 
                                               min="0" max="10" step="0.1" required>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <button type="submit" class="btn btn-primary">Th√™m m√¥n h·ªçc</button>
                            </div>
                        </form>

                        <!-- B·∫£ng ƒëi·ªÉm c·ªßa k·ª≥ -->
                        <div class="mt-4">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>M√¥n h·ªçc</th>
                                        <th>T√≠n ch·ªâ</th>
                                        <th>ƒêi·ªÉm 10</th>
                                        <th>ƒêi·ªÉm 4</th>
                                        <th>Thao t√°c</th>
                                    </tr>
                                </thead>
                                <tbody id="grades-{{ i }}">
                                    <!-- D·ªØ li·ªáu ƒëi·ªÉm s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y b·∫±ng JavaScript -->
                                </tbody>
                            </table>
                        </div>

                        <!-- K·∫øt qu·∫£ GPA c·ªßa k·ª≥ -->
                        <div class="alert alert-info mt-3">
                            <strong>GPA K·ª≥ {{ i }}:</strong>
                            <span id="gpa-{{ i }}">0.00</span>/4.0
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- N√∫t t√≠nh GPA to√†n kh√≥a v√† xu·∫•t Excel -->
        <div class="text-center mt-4">
            <button id="calculateTotalGPA" class="btn btn-primary btn-lg me-3">
                üßÆ T√≠nh GPA To√†n Kh√≥a
            </button>
            <button id="exportExcel" class="btn btn-success btn-lg">
                üì§ Xu·∫•t Excel
            </button>
        </div>

        <!-- K·∫øt qu·∫£ GPA to√†n kh√≥a -->
        <div id="totalGPAResult" class="alert alert-success mt-4" style="display: none;">
            <h4 class="alert-heading">K·∫øt qu·∫£ GPA to√†n kh√≥a</h4>
            <p class="mb-0">GPA: <strong id="totalGPA">0.00</strong>/4.0</p>
            <p class="mb-0">T·ªïng s·ªë t√≠n ch·ªâ: <strong id="totalCredits">0</strong></p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    // Script ri√™ng cho trang n√†y s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y
</script>
{% endblock %}